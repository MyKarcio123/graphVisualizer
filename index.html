<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="header">
	<h1>hey</h1>
</div>
<div class="secondheader">
</div>
<div class="visualizer">
	<script>
	var state=0
	var prevClass="notvisited"
	var onClick = function(id){
		return function curried_func(e){
			e.preventDefault();
			if(state==0){
				if(document.getElementById(id).className == "start"){
					document.getElementById(id).className = "notvisited";
					state=1
				}else if(document.getElementById(id).className == "end"){
					document.getElementById(id).className = "notvisited";
					state=2
				}else if(document.getElementById(id).className == "notvisited"){
					document.getElementById(id).className = "block";
					state=3				
				}else if(document.getElementById(id).className == "block"){
					document.getElementById(id).className = "notvisited";
					state=3		
				}
			}
		}
	}
	var onUp = function(id){
		return function curried_func(e){
			if(state==1){
				document.getElementById(id).className = "start";
				state=0			
			}			
			else if(state==2){
				document.getElementById(id).className = "end";
				state=0			
			}
			else if(state==3){
				state=0				
			}
		}
	}
	var onEnter = function(id){
		return function curried_func(e){
			if(state==1){
				prevClass=document.getElementById(id).className
				document.getElementById(id).className = "start";
			}			
			else if(state==2){
				prevClass=document.getElementById(id).className
				document.getElementById(id).className = "end";
			}
			else if(state==3){
				if(document.getElementById(id).className == "notvisited"){
					document.getElementById(id).className = "block";
				}else if(document.getElementById(id).className == "block"){
					document.getElementById(id).className = "notvisited"
				}
			}
		}
	}	
	var onLeave = function(id){
		return function curried_func(e){
			if(state==1 || state==2){
				document.getElementById(id).className = prevClass;
			}
		}
	}
	</script>
	<script>
	  var body = document.getElementsByTagName("body")[0];
	  var tbl = document.createElement("table");
	  var tblBody = document.createElement("tbody");
	  for (var i = 0; i < 30; i++) {
		var row = document.createElement("tr");
		row.setAttribute('id',"row "+i);
		for (var j = 0; j < 75; j++) {
		  var cell = document.createElement("td");
		  cell.setAttribute('id', i+"-"+j);
		  cell.className = "notvisited";
		  cell.addEventListener("mousedown",onClick(i+"-"+j));
		  cell.addEventListener("mouseenter",onEnter(i+"-"+j));
		  cell.addEventListener("mouseleave",onLeave(i+"-"+j));
		  cell.addEventListener("mouseup",onUp(i+"-"+j));
		  if(i==12 && j==8){
			cell.className = "start";
		  }		  
		  if(i==12 && j==60){
			cell.className = "end";
		  }
		  row.appendChild(cell);
		}
		tblBody.appendChild(row);
	  }
	  tbl.appendChild(tblBody);
	  body.appendChild(tbl);
	  tbl.setAttribute("border", "2");
	</script>
</div>
</body>
</html>